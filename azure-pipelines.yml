# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

variables:
- group: theale-prism-central
trigger:
- master

pool: 'default'

steps:
- script: ping 192.168.2.50 -c 4
  displayName: 'Run ping to Prism Central'

- script: |
    echo Add other tasks to build, test, and deploy your project.
    echo See https://aka.ms/yaml
  displayName: 'Run a multi-line script'

- script: "curl -k --header 'Content-Type: application/json' -u $PC_USER:$PC_PASS  https://$PC_IP:9440/api/nutanix/v3/services/nucalm/status && echo $PC_IP"
  env:
    PC_IP: $(pc_ip)
    PC_USER: $(pc_user)
    PC_PASS: $(pc_pass)
  displayName: 'Check if Calm is enabled'